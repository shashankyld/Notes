
# BASIC DOCKER COMMANDS-

Docker:

```bash
docker image ls #Lists available images 
```

```bash
docker build -t myapp:v1.0 . # Example build command with name tag and version
```

```bash
docker build --no-cache -t myapp:v1.0 . # This will re-clone your git code bases if your rebuilding the docker file.
```

```bash
docker ps -a #Shows current and previous containers
```

```bash
docker container run -it [docker_image] # Interactive container
```

```bash
docker container ls # List running containers
```

```bash
docker exec -it container_name bash # Access already running container interactively
```

```bash
docker build -t <existing_image_name> . # To build an image from an updated dockerfile
```

```bash
docker container prune # Delete exited containers
```

```bash
docker rmi <image_name> # Delete image, only works when all containers of this image are deleted
```

### TO FORWARD GUI to HOST from CONTAINER

1. Allow X11 connections from Docker containers by running the command:

```bash
# on host
xhost + 
```

1. This command maps the X11 socket file in the host machine to the corresponding file in the container and sets the **`DISPLAY`** environment variable in the container to the value of the **`DISPLAY`** variable in the host machine.

```bash
#To enable display for docker container
# Launch container using this command
docker run -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix <image_name> 

```

### To Mount folders from host to container

```bash
docker run -v /path/on/host:/path/in/container -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix <image-name> 
```

Mounting Hardware from Host to Container

```bash
docker run --privileged …
```

## Docker Knowledge:

1. **Container exited doesn’t mean container deleted, so when you try to delete image of a container that hasn’t been deleted, you get the error.** 
- Containers can be exited but not deleted for a variety of reasons. Some common reasons include:
- Troubleshooting: Sometimes, containers may fail or exit with an error, and you may want to investigate the cause of the error. In this case, you may choose to keep the container around so that you can examine its logs and debug the issue.
- Data retention: Containers can be used to run applications that generate or manipulate data. If you want to retain the data generated by a container even after it has exited, you may choose to keep the container around and use the **docker cp** command to copy the data out of the container.
- Resource constraints: Docker containers run within a limited set of resources (CPU, memory, etc.). If your system is running low on resources, Docker may choose to kill or exit containers that are not currently being used in order to free up resources for other containers or applications. In this case, the container may be left in an exited state until you explicitly delete it.
- In general, it is a good practice to clean up exited containers regularly in order to free up disk space and prevent clutter. You can use the **docker container prune** command to remove all containers that have exited and are not currently running.
1. **if you edit a text file in container and close it. will it be saved to the image**
- No, editing a file inside a container will not automatically save it to the image. Changes made inside a container are only saved to that container's writable layer, which is not persisted when the container is stopped or deleted.
- If you want to persist changes to a container's filesystem, you can use Docker's **`docker commit`** command to create a new image with the changes made in the container. Alternatively, you can use a volume to mount a directory on the host filesystem into the container, so that changes made inside the container are automatically reflected in the host filesystem.
1. **PRIVILEGED TAG**

The `--privileged` flag is used with the `docker run` command to give a container full access to the host system. When a container is run with `--privileged`, it can perform various system-level operations that are otherwise restricted, such as accessing hardware devices, mounting file systems, changing network settings, and more.

By default, containers run in an isolated environment with limited access to the host system. However, some applications require more access to the host system to function properly. In these cases, using the `--privileged` flag can be useful. However, it's important to use caution when running containers with full privileges, as it can potentially introduce security risks.

- `-network=host` allows the container to use the host network stack and thus have the same network interfaces and routing table as the host system.
- `-privileged` gives the container full access to the host system, including kernel capabilities and devices, which can be necessary for some applications.

However, using both options together may not be advisable in all cases as it can potentially compromise the security of the host system.
